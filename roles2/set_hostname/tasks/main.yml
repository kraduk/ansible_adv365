---
  - debug: msg="start of {{role_path|basename}} role"
    tags: always


  - name: Get hostname mgmt
    local_action:
      shell grep -i {{ ansible_mgmt.ipv4.address }} /etc/hosts|  awk '{print $2}'
    when: ansible_mgmt.ipv4.address is defined
    register: hn
    sudo: no
    ignore_errors: True
    tags: set_hostname
    
  - name: Get hostname build
    local_action:
      shell grep -i {{ ansible_build.ipv4.address }} /etc/hosts|  awk '{print $2}'
    when: ansible_build.ipv4.address is defined
    register: hn
    sudo: no
    ignore_errors: True
    tags: set_hostname

  - include: redhat.yml  
    tags: set_hostname
    when: "hn is defined and hn.rc == 0 and ansible_os_family | lower == 'redhat'"

    



  
